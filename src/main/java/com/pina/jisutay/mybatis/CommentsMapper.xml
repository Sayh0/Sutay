<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="comments">
	<select id="getList" parameterType="commentsDto" resultType="commentsDto">
			SELECT *
		FROM
			(SELECT result1.*, ROWNUM AS rnum
			FROM
				(SELECT num, writer, room_img, score, 
					content, room_num, comments.regdate, profile 
				FROM comments
				INNER JOIN users
				ON comments.writer=users.id
				WHERE room_num=#{room_num}
				ORDER BY comment_num ASC, num ASC) result1)
		WHERE rnum BETWEEN #{startRowNum} AND #{endRowNum};
	</select>
</mapper>